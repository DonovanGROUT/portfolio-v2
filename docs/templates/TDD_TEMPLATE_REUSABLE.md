# üîÑ TEMPLATE TDD R√âUTILISABLE - M√âTHODOLOGIE COMPL√àTE

## üéØ **OBJECTIF**

Template complet pour d√©velopper n'importe quel projet web avec la m√©thodologie TDD stricte (Red ‚Üí Green ‚Üí Refactor) utilis√©e avec succ√®s sur le portfolio Donovan GROUT.

**R√©sultats prouv√©s :**

- ‚úÖ **Button Component** : Score Lighthouse 100/100, 22 tests unitaires, production ready
- ‚úÖ **Pipeline CI/CD** : D√©ploiement automatique, quality gates
- ‚úÖ **Architecture scalable** : Design System modulaire

---

## üìÅ **STRUCTURE PROJET RECOMMAND√âE**

```bash
project-name/
‚îú‚îÄ‚îÄ docs/                           # üìö Documentation
‚îÇ   ‚îú‚îÄ‚îÄ PHASE_1_SETUP.md           # Configuration environnement
‚îÇ   ‚îú‚îÄ‚îÄ PHASE_2_CICD.md            # Pipeline CI/CD
‚îÇ   ‚îú‚îÄ‚îÄ PHASE_3_TDD.md             # D√©veloppement TDD
‚îÇ   ‚îú‚îÄ‚îÄ CHARTE_GRAPHIQUE.md        # Design System
‚îÇ   ‚îú‚îÄ‚îÄ TESTING_CHECKLIST.md       # Validation qualit√©
‚îÇ   ‚îî‚îÄ‚îÄ scripts/                   # Scripts de test
‚îÇ       ‚îú‚îÄ‚îÄ aria-test.js           # Tests accessibilit√©
‚îÇ       ‚îú‚îÄ‚îÄ devtools-test.js       # Validation technique
‚îÇ       ‚îî‚îÄ‚îÄ animation-test.js      # Tests animations
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ design-system/         # üé® Composants r√©utilisables
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Button/
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ Button.test.tsx    # ‚Üê TDD: Tests d'abord
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ Button.tsx         # ‚Üê Impl√©mentation apr√®s
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ [Autres composants]/
‚îÇ   ‚îú‚îÄ‚îÄ lib/                       # üõ†Ô∏è Utilitaires
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ colors.ts              # Charte graphique centralis√©e
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils.ts               # Fonctions + s√©curit√©
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ types.ts               # Types TypeScript
‚îÇ   ‚îî‚îÄ‚îÄ app/                       # üìÑ Pages/Routes
‚îî‚îÄ‚îÄ [Config files...]              # Package.json, tailwind, etc.
```

---

## üî¥üü¢üîµ **M√âTHODOLOGIE TDD - 3 PHASES**

### **üî¥ PHASE RED - TESTS FIRST**

#### **1. Analyse du Besoin**

```markdown
# Exemple: Button Component

- Quels variants ? (primary, secondary, outline)
- Quelles tailles ? (small, medium, large)
- Quels √©tats ? (loading, disabled, hover)
- Accessibilit√© ? (ARIA, keyboard, touch targets)
- S√©curit√© ? (XSS protection, sanitization)
```

#### **2. √âcriture des Tests (AVANT code)**

```typescript
// ComponentName.test.tsx - CR√â√â EN PREMIER
describe('ComponentName - TDD Red Phase', () => {
  // üî¥ RED 1: Rendu basique
  test('should render with text content', () => {
    render(<ComponentName>Hello</ComponentName>);
    expect(screen.getByText('Hello')).toBeInTheDocument();
  });

  // üî¥ RED 2: Variants
  test('should apply primary variant', () => {
    render(<ComponentName variant="primary">Text</ComponentName>);
    expect(screen.getByText('Text')).toHaveClass('bg-primary');
  });

  // üî¥ RED 3: Accessibilit√©
  test('should be keyboard accessible', () => {
    render(<ComponentName>Button</ComponentName>);
    const element = screen.getByRole('button');
    expect(element).toHaveAttribute('tabIndex', '0');
  });

  // ... 15-25 tests couvrant TOUS les cas
});
```

#### **3. D√©finition des Types**

```typescript
// Types d'abord, avant impl√©mentation
export type ComponentVariant = "primary" | "secondary" | "outline";
export type ComponentSize = "small" | "medium" | "large";

export interface ComponentProps {
  variant?: ComponentVariant;
  size?: ComponentSize;
  children: React.ReactNode;
  className?: string;
  // ... props compl√®tes
}
```

#### **4. Validation RED**

```bash
npm test ComponentName.test.tsx
# ‚ùå TOUS les tests DOIVENT √©chouer (pas de composant encore)
# ‚úÖ C'est normal et attendu en phase RED
```

---

### **üü¢ PHASE GREEN - IMPL√âMENTATION MINIMALE**

#### **1. Cr√©ation du Composant**

```typescript
// ComponentName.tsx - CR√â√â APR√àS les tests
export const ComponentName = ({ children, variant = 'primary', ...props }) => {
  // ‚ö†Ô∏è IMPL√âMENTATION MINIMALE pour faire passer les tests
  // Pas d'optimisation, focus sur la fonctionnalit√©

  const baseClasses = 'component-base';
  const variantClasses = {
    primary: 'bg-primary text-white',
    secondary: 'bg-secondary text-white',
    outline: 'border border-primary text-primary'
  };

  return (
    <div
      className={`${baseClasses} ${variantClasses[variant]}`}
      {...props}
    >
      {children}
    </div>
  );
};
```

#### **2. D√©veloppement It√©ratif**

```bash
# Mode watch pour feedback continu
npm test ComponentName.test.tsx --watch

# D√©velopper progressivement jusqu'√† :
# ‚úÖ TOUS les tests verts (100% pass rate)
```

#### **3. Validation GREEN**

```bash
npm test ComponentName.test.tsx
# ‚úÖ 100% des tests doivent passer
# ‚úÖ Couverture de code compl√®te
# ‚ö†Ô∏è Code pas optimis√© (normal en GREEN)
```

---

### **üîµ PHASE REFACTOR - OPTIMISATION**

#### **1. Am√©lioration sans Casser les Tests**

```typescript
// Optimisation du code pr√©c√©dent
const buttonVariants = {
  base: [
    'inline-flex items-center justify-center',
    'font-medium transition-colors duration-200',
    'focus:outline-none focus:ring-2',
    // ... classes optimis√©es
  ].join(' '),

  variants: {
    primary: 'bg-primary-700 hover:bg-primary-800 text-white',
    // ... variants optimis√©s
  }
};

export const ComponentName = forwardRef<HTMLElement, ComponentProps>(
  ({ variant = 'primary', className, ...props }, ref) => {
    return (
      <div
        ref={ref}
        className={cn(buttonVariants.base, buttonVariants.variants[variant], className)}
        {...props}
      />
    );
  }
);
```

#### **2. Int√©gration Design System**

```typescript
// /src/lib/colors.ts - Charte centralis√©e
export const colors = {
  primary: { 700: "#yourcolor" },
  // ... palette compl√®te
};

// Utilisation coh√©rente dans composants
const variantClasses = {
  primary: `bg-[${colors.primary[700]}] text-white`,
  // ... ou classes Tailwind correspondantes
};
```

#### **3. Tests de R√©gression**

```bash
# Validation que RIEN n'est cass√©
npm test                        # Tous tests
npm run build                   # Build production
npm run lint                    # Qualit√© code

# ‚úÖ Tous doivent passer sans r√©gression
```

---

## üß™ **TESTING STRATEGY COMPL√àTE**

### **1. Tests Automatis√©s**

```bash
# Tests unitaires (Vitest + Testing Library)
npm test [Component].test.tsx

# Tests d'int√©gration
npm test -- --coverage

# Quality gates
npm run lint
npm run type-check
npm run build
```

### **2. Tests Manuels**

```bash
# Checklist par composant
‚ñ° Visual testing (layout, couleurs)
‚ñ° Interaction testing (mouse, keyboard)
‚ñ° Responsive testing (mobile, tablet, desktop)
‚ñ° Accessibility testing (ARIA, contrast)
‚ñ° Performance testing (Lighthouse)
```

### **3. Scripts d'Aide (Copiables)**

```javascript
// aria-test.js - √Ä coller dans Console DevTools
const elements = document.querySelectorAll("[role], button, input, a");
console.log("üîç ARIA Test Results:");
elements.forEach((el, i) => {
  console.log(`Element ${i + 1}:`, {
    role: el.getAttribute("role") || el.tagName.toLowerCase(),
    "aria-label": el.getAttribute("aria-label"),
    "aria-disabled": el.getAttribute("aria-disabled"),
    tabIndex: el.tabIndex,
  });
});
```

---

## ‚ôø **ACCESSIBILIT√â WCAG 2.1 AA**

### **Standards √† Respecter**

```typescript
// Checklist obligatoire par composant
const accessibilityChecklist = {
  contrast: "Minimum 4.5:1 (AA) ou 7:1 (AAA)",
  keyboard: "Tab, Enter, Space, Arrow keys",
  aria: "Roles, states, properties appropri√©s",
  touchTargets: "Minimum 44px √ó 44px",
  focusManagement: "Visible et logique",
  semantics: "HTML s√©mantique correct",
};
```

### **Tests Accessibilit√©**

```bash
# Lighthouse audit
# F12 > Lighthouse > Accessibility only
# Target: Score 95+ minimum

# Tests manuels
‚ñ° Navigation clavier uniquement
‚ñ° Mode contraste √©lev√©
‚ñ° Zoom 200% (lisibilit√©)
‚ñ° Screen reader (optionnel)
```

---

## üîí **S√âCURIT√â WEB**

### **Protections Obligatoires**

```typescript
// /src/lib/security.ts
export function sanitizeInput(input: string): string {
  return input
    .replace(/[<>]/g, "") // HTML injection
    .replace(/javascript:/gi, "") // JS injection
    .replace(/on\w+=/gi, "") // Event handlers
    .trim();
}

export function isValidEmail(email: string): boolean {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return emailRegex.test(email) && email.length <= 254;
}

// CSP Headers (Next.js config)
const cspHeader = `
  default-src 'self';
  script-src 'self';
  style-src 'self' 'unsafe-inline';
  img-src 'self' data: blob:;
  connect-src 'self';
`;
```

---

## üé® **DESIGN SYSTEM SCALABLE**

### **1. Charte Graphique Centralis√©e**

```typescript
// /src/lib/design-system.ts
export const designSystem = {
  colors: {
    primary: { 700: "#primary-color" },
    secondary: { 700: "#secondary-color" },
    neutral: { 700: "#text-color" },
  },

  typography: {
    h1: "text-4xl font-bold leading-tight",
    h2: "text-3xl font-semibold leading-snug",
    body: "text-base leading-relaxed",
    caption: "text-sm leading-normal",
  },

  spacing: {
    xs: "0.25rem", // 4px
    sm: "0.5rem", // 8px
    md: "1rem", // 16px
    lg: "1.5rem", // 24px
    xl: "2rem", // 32px
  },

  breakpoints: {
    mobile: "320px",
    tablet: "768px",
    desktop: "1024px",
  },
};
```

### **2. Composants Modulaires**

```typescript
// Pattern de composant r√©utilisable
export interface BaseComponentProps {
  className?: string;
  children?: React.ReactNode;
  variant?: string;
  size?: string;
}

export const createComponent = <T extends BaseComponentProps>(
  displayName: string,
  defaultClasses: string,
  variants: Record<string, string>
) => {
  const Component = ({ variant = 'default', className, ...props }: T) => {
    return (
      <div
        className={cn(defaultClasses, variants[variant], className)}
        {...props}
      />
    );
  };

  Component.displayName = displayName;
  return Component;
};
```

---

## üöÄ **CI/CD PIPELINE**

### **GitHub Actions Template**

```yaml
# .github/workflows/ci-cd.yml
name: CI/CD Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [develop]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: "18"
          cache: "npm"

      - run: npm ci
      - run: npm run lint
      - run: npm run type-check
      - run: npm test -- --coverage
      - run: npm run build

  deploy-preview:
    if: github.event_name == 'pull_request'
    needs: test
    # D√©ploiement preview (Vercel/Netlify)

  deploy-production:
    if: github.ref == 'refs/heads/main'
    needs: test
    # D√©ploiement production
```

### **Quality Gates**

```json
// package.json scripts
{
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "test": "vitest",
    "test:coverage": "vitest --coverage",
    "lint": "eslint . --ext .ts,.tsx",
    "lint:fix": "eslint . --ext .ts,.tsx --fix",
    "type-check": "tsc --noEmit",
    "check": "npm run lint && npm run type-check && npm test && npm run build"
  }
}
```

---

## üìä **M√âTRIQUES DE QUALIT√â**

### **Targets par Composant**

```bash
‚úÖ Tests unitaires : 95%+ couverture
‚úÖ Lighthouse Accessibility : 95+ score
‚úÖ Lighthouse Performance : 90+ score
‚úÖ Bundle size : <10kB par composant
‚úÖ Build time : <30s total
‚úÖ Zero console errors : Production clean
```

### **Validation Continue**

```bash
# Scripts de monitoring
npm run test:watch              # TDD feedback loop
npm run build:analyze           # Bundle analysis
npm run lighthouse:ci           # Performance monitoring
```

---

## üéØ **CHECKLIST PROJET COMPLET**

### **Setup Initial (Phase 1)**

- [ ] ‚úÖ Next.js + TypeScript + Tailwind
- [ ] ‚úÖ Vitest + Testing Library setup
- [ ] ‚úÖ ESLint + Prettier configuration
- [ ] ‚úÖ Git hooks + pre-commit validation

### **CI/CD (Phase 2)**

- [ ] ‚úÖ GitHub Actions pipeline
- [ ] ‚úÖ Automated testing on PR
- [ ] ‚úÖ Preview deployments
- [ ] ‚úÖ Production deployment

### **Development (Phase 3)**

- [ ] ‚úÖ Design System foundations
- [ ] ‚úÖ TDD methodology per component
- [ ] ‚úÖ Accessibility WCAG compliance
- [ ] ‚úÖ Security best practices
- [ ] ‚úÖ Performance optimization

### **Production (Phase 4)**

- [ ] ‚úÖ Content integration
- [ ] ‚úÖ SEO optimization
- [ ] ‚úÖ Analytics setup
- [ ] ‚úÖ Monitoring & maintenance

---

## üí° **CONSEILS POUR R√âUTILISATION**

### **1. Adaptation du Template**

```bash
# Customiser selon le projet
1. Modifier /src/lib/colors.ts ‚Üí Votre charte graphique
2. Adapter /docs/CHARTE_GRAPHIQUE.md ‚Üí Votre concept
3. Configurer CI/CD ‚Üí Vos environnements
4. Ajuster tests ‚Üí Vos requirements sp√©cifiques
```

### **2. Components Prioritaires**

```bash
# Ordre de d√©veloppement recommand√©
1. Button ‚Üí Base interactions
2. Typography ‚Üí Syst√®me textuel
3. Card ‚Üí Conteneurs layouts
4. Navigation ‚Üí UX globale
5. Forms ‚Üí Interactions utilisateur
```

### **3. Gains de Temps Estim√©s**

```bash
‚úÖ Setup environnement : 2-3h ‚Üí 30min
‚úÖ Pipeline CI/CD : 1-2 jours ‚Üí 2h
‚úÖ Methodologie TDD : 1 semaine ‚Üí 1 jour
‚úÖ Design System : 1 semaine ‚Üí 2-3 jours
‚úÖ Tests automatis√©s : 2-3 jours ‚Üí 1 jour

=> Gain total : ~2 semaines sur projet 1 mois
```

---

## üèÜ **R√âSULTATS PROUV√âS - PORTFOLIO DONOVAN**

### **Button Component (R√©f√©rence)**

- ‚úÖ **TDD Complet** : Red ‚Üí Green ‚Üí Refactor
- ‚úÖ **22 tests unitaires** : 100% pass rate
- ‚úÖ **48 tests int√©gration** : Validation compl√®te
- ‚úÖ **Lighthouse 100/100** : Accessibilit√© parfaite
- ‚úÖ **9.84kB optimis√©** : Performance excellente
- ‚úÖ **Production ready** : D√©ploy√© sans bugs

### **Architecture Valid√©e**

- ‚úÖ **Scalable** : Ajout composants simple
- ‚úÖ **Maintenable** : Code modulaire et test√©
- ‚úÖ **Performant** : Bundle optimis√© automatiquement
- ‚úÖ **S√©curis√©** : Protections int√©gr√©es
- ‚úÖ **Accessible** : WCAG 2.1 AA by design

**üöÄ Ce template est pr√™t pour n'importe quel projet web moderne !**
